{"version":3,"sources":["uni-app:///main.js","webpack:///D:/UPUPW_AP7.2_64/htdocs/sunmi/pages/pay/pay.vue?41e3","webpack:///D:/UPUPW_AP7.2_64/htdocs/sunmi/pages/pay/pay.vue?3880","webpack:///D:/UPUPW_AP7.2_64/htdocs/sunmi/pages/pay/pay.vue?1c3e","webpack:///D:/UPUPW_AP7.2_64/htdocs/sunmi/pages/pay/pay.vue?8d2e","uni-app:///pages/pay/pay.vue","webpack:///D:/UPUPW_AP7.2_64/htdocs/sunmi/pages/pay/pay.vue?088a","webpack:///D:/UPUPW_AP7.2_64/htdocs/sunmi/pages/pay/pay.vue?66f0"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","components","sidebar","sunmiModal","mixins","data","bluetoothStatus","payStatusTimer","money","keyHeight","inputMoney","keyList","payTypeList","showSidebar","systemInfo","showPaying","payTimeout","showErrorPay","errorPayDesc","iconRootPath","wgtConfig","locale","description","isShowupgrade","pushClientid","versionCode","showGrabPay","modal_qr","qr_url","onlyContentId","payMentType","qrMb","grabMb","qrSize","transactionArr","is_shangmi","is_lunxun","filters","convertNum","watch","console","setTimeout","onShow","uni","success","mounted","url","methods","judgeBluetooth","resolve","reject","fail","remindOpenBluetooth","addSystemLog","params","token","shebei","terminalId","detail","o","header","method","complete","getStoreName","api","res","hideQrcode","clearInterval","getUrl","onInstall","plus","_this","version","un_id","get_upgrade","then","catch","startUpDate","title","con","downUrl","hidCancelbtn","topImgBg","upDater","startWgt","pathNew","force","icon","connect","zindex","width","height","currentWebview","storeAsString","resData","JsonBigstring","content","type","addLog","addSocketLog","selectAcquirerStoreDtoWithAcquirer","list","r","handleStyle","updateMoney","music","openScan","item","arr","onlyFromCamera","autoZoom","scanType","utils","sendPayment","acquirerType","paymentTerminalRequestVo","amount","currency","actionType","qrCodeNumber","getPayStatusByWx","id","printCurrent","startPrint","getArrFromObj","openSidebar","closeSidebar"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,YAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4H;AAC5H;AACuD;AACL;AACsC;;;AAGxF;AACgM;AAChM,gBAAgB,uMAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,0FAAM;AACR,EAAE,mGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,8FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oMAEN;AACP,KAAK;AACL;AACA,aAAa,yTAEN;AACP,KAAK;AACL;AACA,aAAa,wOAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpGA;AAAA;AAAA;AAAA;AAAouB,CAAgB,+uBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACiJxvB;AACA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;EACAC;IACAC;IACAC;EACA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACA;MACAC;MACAC;MAAA;;MAEAC;MAEAC;MAEAC;MACAC;MACAC;MAEAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;QACA;MACA;MACA;MACA;MACA;IACA;EACA;EACAC;IACAxB;MAAA;MACAyB;MACA;MACA;QACAC;UACA;QACA;MACA;MACA;QACA;QACA;QACA;MACA;IACA;EACA;EACAC;IAAA;IAqBAC;MACAC;QACA;QACA;QACA;UACA;QACA;QACA;QACA;QAEA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;EACAC;IACA;IACA;;IAEA;IACA;IACA;IACAL;IACAA;IACA;MACAG;QACAG;MACA;IACA;MACA;MACA;MACA;IAOA;EACA;EACAC;IACA;IACAC;MAAA;MACA;MACA;QACA;QACAL;UACAC;YACAJ;YACA;YACAG;cACAC;gBACAJ;gBACA;kBACAS;gBACA;kBACA;kBACA;kBACAC;gBACA;cACA;cACAC;gBACA;gBACA;gBACAD;cACA;YACA;UACA;UACAC;YACA;YACAX;YACA;YACAU;UACA;QACA;MACA;IACA;IACA;IACAE;MAAA;MACA;MACAT;QACA;UACA;QACA;MACA;IACA;IACAU;MACA;QACA;UACAC;UACAC;UACAC;UACAC;UACAX;UACAY;QACA;QACAf;UACAG;UACAzC,wBACAsD,EACA;UACAC;YACA;YACA;UACA;UACAC;UACAjB;YACA;UAAA,CACA;UACAO;YACA;UAAA,CACA;UACAW;YACAtB;UACA;QACA;MACA;QACA;MAAA;IAEA;IACAuB;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAC;cAAA;gBAAAC;gBACAzB;gBACAnC;gBACA;kBACAsC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEAuB;MACA;MACAC;MACA;MACA;MACA;IACA;IACAC;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAJ;cAAA;gBAAAC;gBACA5D;gBACA;kBACAmC;kBACAG;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA0B;MACA;MAEAC;MACAA;QACA9B;QACAG;QACA;QACA4B;QACA;UACAC;UACAC;QACA;QACAjC;QACA;QACAwB,eACAU,eACAC;UACAnC;UACAG;UACA;YACA;YACA;cACA4B,oBACAA;cACA;gBACA;kBACAA;gBACA;kBACAA;gBACA;cACA;gBACA;cAAA;cAEAA;YACA;UACA;UACA/B;QACA,GACAoC;UACApC;QACA;MACA;IACA;IACA;IACAqC;MACArC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEAA;MACA;MACA;MACA;MACAA;MACA;QACAsC;MAAA,GACA;QACAC;QACAC;QAAA;QACAC;QACAC;MAAA,EACA;MACA;MACAC;IACA;IAEA;IACA;IACAC;MACA5C;MACA;MACA;MACA;MACA;MACAA;MACA;MACA;MACA;MACA;QACAsC;QACAC;MAAA,GACA;QACAC;QAAA;QACAC;QACAC;MAAA,EACA;MACA;MACAZ;QACA;QACA;QACAa;UACA;YACA;YACA3C;YACA8B,qBACAe;cACAC;YACA,GACA;cACA;cACAhB;YACA,GACA;cACA9B;cACAG;gBACAmC;gBACAS;cACA;YACA,EACA;UACA;QACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;MACA;QACAC;QACAC;QACAC;MACA;MACA;MACAC;MACA;MACAtB;QACA9B;QACA;UACA+B;UACA;UACA;YACAsB;UACA;UACA;UACAtB;UACA;UACA;UACA;UACA/B,YACAsD,iBACA,WACAC,qCACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;UACA,mDACAC,6CACAA,gDACAA;YACAxD;YACA;UAEA;UAEA;YACA+B;YACA;YACA;YACA;YACA,IACAyB,sCACA,gCACA;cACA;gBACA1C;gBACAC;gBACAC;gBACAC;gBACAX;gBACAY;cACA;cACAlB;cACA+B;cAEA5B;gBACAC;kBACA;oBACA2B;kBACA;oBACAA;kBACA;kBAEA5B;oBACAG,oCACAmD,OACA,UACAzF,QACA,SACAwF;kBACA;kBACAzB;kBACAA;kBACAA;gBACA;cACA;YACA;UACA;;UAEA;UACA;UACA;QACA;MACA;IACA;IACA2B;MACA;QACA;QACAvD;UACAG;UACAzC,wBACAsD,EACA;UACAC;YACA;YACA;UACA;UACAC;UACAjB;YACAJ;UACA;UACAW;YACAX;UACA;UACAsB;YACAtB;UACA;QACA;MACA;QACA;QACAA;MACA;IACA;IAEA;IACA2D;MACA;QACA;UACAzC;QACA;QACAf;UACAG;UACAzC,wBACAsD,EACA;UACAC;YACA;YACA;UACA;UACAC;UACAjB;YACA;UAAA;QAEA;MACA;QACA;MAAA;IAEA;IACAwD;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACApC;cAAA;gBAAAC;gBACAzB;gBACA;kBACA;kBACA;kBACA;kBACA6D;oBACA,IACAC,4DACAA,yDACA;sBACAA;oBACA;oBACA;kBACA,IACA;kBACAD;kBACA;kBACAA;oBACA,OACAC,kDACAA,0CACAA;kBAEA;kBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;MACA5D;QACAC;UACA;UACA;UACA;YACA;UAAA;UAEAJ;UACA;YACA;YACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;UACAA;QACA;MACA;IACA;IACAgE;MACA;MACA;MACA;MACA;QACAC;QACA;QACA;QACA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;MACA;QACAA;QACA;QACA;MACA;QACAjE;QACA;UACA;QACA;QACA;UACA;QACA;QACAiE;QACA;QACA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MAEAC;gBACA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAKA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACAC,OACA,uCACA,wCACA,wCACA;gBAAA,KACAA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAGA;kBACA;kBACAjE;oBACAkE;oBACAC;oBACAC;oBACAnE;sBACAJ;sBACAA;sBACAA;sBACA;oBACA;oBACAsB;sBACAnB;oBACA;kBACA;gBACA;kBACA;kBACA;oBACA;oBACAA;sBACAkE;sBACAC;sBACAC;sBACAnE;wBACAJ;wBACAA;wBACAA;wBACA;sBACA;sBACAsB;wBACAnB;sBACA;oBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAEAqE;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAD;gBACA;kBACA;gBACA;gBACAE;gBACAN,OACA,uCACA,uCACA;gBACA;kBACAM;gBACA;gBACA1E;gBACAmB;kBACAuD;kBACAC;oBACAC;oBACAC;oBACAC;oBACAC;kBACA;gBACA;gBACA/E;gBAAA;gBAAA,OACAwB;cAAA;gBAAAC;gBACAzB;gBAAA,MACAyB;kBAAA;kBAAA;gBAAA;gBACA5D,iBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBAAA,MACA6G;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBACA;gBACA;gBAAA;cAAA;gBAAA,MAEAA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBACA;gBACA;gBAAA;cAAA;gBAGA;gBACA;;gBAEA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBACA;kBACA;gBAAA,CACA;kBACA;kBACA;kBACA;gBACA;cAAA;gBACAvE;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACA6E;MAAA;MACA;QACAC;MACA;MACAtD;MACA;MACA;QAEA;UACA3B;UACA;QACA;QACA;QAEAwB;UACAxB;UACA;YACA;YACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;YACA;YACA;cACA2B;cACA;cACA;cACA;cACA;cACAxB;gBACAG,oCACAmD,OACA,UACA5F,oBACA,SACAA;cACA;cACA;cACA;YACA;UACA;UACA;UACAmC;QACA;UACAA;UACA;QACA;MACA;IACA;IAEAkF;MACA;MACA;QACAf;MACA;QACAA;MACA;MACA;QACA;MACA;IACA;IACA;IACAgB;MAAA;MACA;MACAhF;QACAC;UACA;YACA;UACA;YACA;UACA;QACA;MACA;IACA;IACAgF;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACz/BA;AAAA;AAAA;AAAA;AAAm5C,CAAgB,81CAAG,EAAC,C;;;;;;;;;;;ACAv6C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/pay/pay.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/pay/pay.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./pay.vue?vue&type=template&id=c10d0c50&scoped=true&\"\nvar renderjs\nimport script from \"./pay.vue?vue&type=script&lang=js&\"\nexport * from \"./pay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pay.vue?vue&type=style&index=0&id=c10d0c50&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c10d0c50\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/pay/pay.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay.vue?vue&type=template&id=c10d0c50&scoped=true&\"","var components\ntry {\n  components = {\n    sunmiModal: function () {\n      return import(\n        /* webpackChunkName: \"components/sunmiModal/sunmiModal\" */ \"@/components/sunmiModal/sunmiModal.vue\"\n      )\n    },\n    uqrcode: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/Sansnn-uQRCode/components/uqrcode/uqrcode\" */ \"@/uni_modules/Sansnn-uQRCode/components/uqrcode/uqrcode.vue\"\n      )\n    },\n    sidebar: function () {\n      return import(\n        /* webpackChunkName: \"components/sidebar/sidebar\" */ \"@/components/sidebar/sidebar.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = _vm._f(\"convertNum\")(_vm.money)\n  var g0 = _vm.payTypeList.length\n  var m0 = _vm.showErrorPay ? _vm.$t(\"Error\") : null\n  var m1 = _vm.showErrorPay ? _vm.$t(\"ErrorBtn\") : null\n  var m2 = _vm.showGrabPay && _vm.locale == \"zh\" ? _vm.$t(\"grab.t1\") : null\n  var m3 = _vm.showGrabPay && _vm.locale == \"zh\" ? _vm.$t(\"grab.t1_1\") : null\n  var m4 = _vm.showGrabPay && _vm.locale == \"zh\" ? _vm.$t(\"grab.t2\") : null\n  var m5 = _vm.showGrabPay && !(_vm.locale == \"zh\") ? _vm.$t(\"grab.t1\") : null\n  var m6 = _vm.showGrabPay && !(_vm.locale == \"zh\") ? _vm.$t(\"grab.t1_1\") : null\n  var m7 = _vm.showGrabPay && !(_vm.locale == \"zh\") ? _vm.$t(\"grab.t2\") : null\n  var m8 = _vm.showGrabPay ? _vm.$t(\"grab.s1\") : null\n  var m9 = _vm.showGrabPay ? _vm.$t(\"grab.s2\") : null\n  var m10 = _vm.showGrabPay ? _vm.$t(\"grab.s3\") : null\n  var m11 = _vm.showGrabPay ? _vm.$t(\"grab.s4\") : null\n  var m12 = _vm.showGrabPay ? _vm.$t(\"grab.f1\") : null\n  var m13 = _vm.showGrabPay ? _vm.$t(\"grab.f2\") : null\n  var m14 = _vm.showGrabPay ? _vm.$t(\"grab.f3\") : null\n  var m15 = _vm.showGrabPay ? _vm.$t(\"grab.w1\") : null\n  var m16 = _vm.showGrabPay ? _vm.$t(\"grab.w2\") : null\n  var m17 = _vm.showGrabPay ? _vm.$t(\"grab.w3\") : null\n  var m18 = _vm.showGrabPay ? _vm.$t(\"grab.b\") : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.showPaying = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.showErrorPay = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0,\n        g0: g0,\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        m3: m3,\n        m4: m4,\n        m5: m5,\n        m6: m6,\n        m7: m7,\n        m8: m8,\n        m9: m9,\n        m10: m10,\n        m11: m11,\n        m12: m12,\n        m13: m13,\n        m14: m14,\n        m15: m15,\n        m16: m16,\n        m17: m17,\n        m18: m18,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"pay\">\r\n    <sunmiModal v-if=\"bluetoothStatus && is_shangmi == 0\"></sunmiModal>\r\n    <!-- 顶部head -->\r\n    <view class=\"sun-header\">\r\n      <view class=\"sidebar\" @click=\"openSidebar\"></view>\r\n      <image class=\"side\" src=\"/static/images/icon/sidebar.png\" @click=\"openSidebar\" mode=\"\"></image>\r\n      <image class=\"logo\" src=\"/static/images/icon/logo.png\" mode=\"\"></image>\r\n      <image class=\"scan\" src=\"/static/images/icon/scan.png\" mode=\"\"></image>\r\n    </view>\r\n    <!-- 金额 -->\r\n    <view class=\"pay-money\">\r\n      <view class=\"symbol\">$ </view>\r\n      <view>{{ money | convertNum }}</view>\r\n    </view>\r\n    <!-- 金额键盘 -->\r\n    <view class=\"keyboard\">\r\n      <view class=\"keyboard-item 123\" :class=\"item == 'C' ? 'red' : ''\" :style=\"'height:' + keyHeight + 'px'\"\r\n        v-for=\"(item, index) in keyList\" :key=\"index\" @click=\"updateMoney(item)\">\r\n        <span v-if=\"item != 'del'\">{{ item }}</span>\r\n        <image v-else src=\"/static/images/icon/del.png\" mode=\"\" style=\"width: 64rpx; height: 54rpx\"></image>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 支付方式 -->\r\n    <view class=\"pay-type\" :class=\"payTypeList.length <= 3 ? 'ce' : ''\">\r\n      <view class=\"item\" v-for=\"(item, index) in payTypeList\" @click=\"openScan(item)\" :key=\"index\">\r\n        <image v-if=\"item.acquirerType == 'TANGS_UNIQ_GIFT'\" src=\"/static/images/icon/UniqGfit.svg\" mode=\"\"></image>\r\n        <image v-else-if=\"item.acquirerType == 'RED_DOT_PAY'\" src=\"/static/images/icon/RED_DOT_PAY.svg\" mode=\"\"></image>\r\n        <image v-else :src=\"'/static/images/icon/' + item.acquirerType + '.png'\" mode=\"\"></image>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 支付中 -->\r\n    <view class=\"paying\" v-if=\"showPaying\">\r\n      <view class=\"pay-mask\"></view>\r\n      <view class=\"pay-img\" v-if=\"!payTimeout\">\r\n        <image v-if=\"locale == 'en'\" src=\"/static/images/pay/paying-en.png\" mode=\"widthFix\"></image>\r\n        <image v-else src=\"/static/images/pay/paying-zh.png\" mode=\"widthFix\"></image>\r\n      </view>\r\n      <view class=\"pay-img\" v-else @click=\"showPaying = false\">\r\n        <image v-if=\"locale == 'en'\" src=\"/static/images/pay/close-en.png\" mode=\"widthFix\"></image>\r\n        <image v-else src=\"/static/images/pay/close-zh.png\" mode=\"widthFix\"></image>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 失败弹框 -->\r\n    <view class=\"paying\" v-if=\"showErrorPay\">\r\n      <view class=\"pay-mask\"></view>\r\n      <view class=\"pay-img pay-con\">\r\n        <view class=\"pay-icon\">\r\n          <image src=\"/static/images/pay/error.png\" mode=\"widthFix\"></image>\r\n        </view>\r\n        <view class=\"pay-title\">{{ $t('Error') }}</view>\r\n        <view class=\"pay-desc\">{{ errorPayDesc }}</view>\r\n        <view class=\"pay-btn\" @click=\"showErrorPay = false\">{{\r\n          $t('ErrorBtn')\r\n        }}</view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- GrabPay 支付 -->\r\n    <view class=\"grabPay\" v-if=\"showGrabPay\">\r\n      <view class=\"\" v-if=\"locale == 'zh'\">\r\n        <view class=\"g-title\">{{ $t('grab.t1') }} {{ payMentType }} {{ $t('grab.t1_1') }}</view>\r\n        <view class=\"g-title\">{{ $t('grab.t2') }}</view>\r\n      </view>\r\n      <view class=\"\" v-else>\r\n        <view class=\"g-title\">{{ $t('grab.t1') }} {{ $t('grab.t1_1') }}</view>\r\n        <view class=\"g-title\">{{ payMentType }} {{ $t('grab.t2') }}</view>\r\n      </view>\r\n\r\n      <view class=\"g-qr\" :style=\"\r\n          'width:' +\r\n          qrSize +\r\n          'px;height:' +\r\n          qrSize +\r\n          'px;margin: ' +\r\n          (qrMb + 10) +\r\n          'px auto;'\r\n        \">\r\n        <image class=\"g-scan\" src=\"/static/images/pay/scan.png\" mode=\"widthFix\"></image>\r\n        <uqrcode v-if=\"payMentType == 'GrabPay'\" ref=\"uqrcode\" canvas-id=\"qrcode\" :value=\"qr_url\" size=\"160\"\r\n          :options=\"{ margin: 10 }\"></uqrcode>\r\n        <image v-else style=\"width: 160px; height: 160px\" class=\"g-scan\" :src=\"'data:image/jpeg;base64,' + qr_url\"\r\n          mode=\"widthFix\"></image>\r\n      </view>\r\n      <view class=\"g-status g-s\" :style=\"'margin-bottom: ' + grabMb + 'px;'\">\r\n        <view class=\"l\">\r\n          <image src=\"/static/images/status/success.svg\" mode=\"widthFix\"></image>\r\n        </view>\r\n        <view class=\"r\">\r\n          <view class=\"\">\r\n            {{ $t('grab.s1') }}\r\n          </view>\r\n          <view class=\"\">\r\n            {{ $t('grab.s2') }}\r\n            <text style=\"color: #00c260\">{{ $t('grab.s3') }}</text><text\r\n              style=\"color: #00c260\">{{ $t('grab.s4') }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <view class=\"g-status g-f\" :style=\"'margin-bottom: ' + grabMb + 'px;'\">\r\n        <view class=\"l\">\r\n          <image src=\"/static/images/status/fail.svg\" mode=\"widthFix\"></image>\r\n        </view>\r\n        <view class=\"r\">\r\n          <view class=\"\">\r\n            {{ $t('grab.f1') }}\r\n          </view>\r\n          <view class=\"\">\r\n            {{ $t('grab.f2') }}\r\n            <text style=\"color: #ff0000\">{{ $t('grab.f3') }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"g-status g-p\" style=\"border: none\" :style=\"'margin-bottom: ' + grabMb + 'px;'\">\r\n        <view class=\"l\">\r\n          <image src=\"/static/images/status/warning.svg\" mode=\"widthFix\"></image>\r\n        </view>\r\n        <view class=\"r\">\r\n          <view class=\"\">\r\n            {{ $t('grab.w1') }}\r\n          </view>\r\n          <view class=\"\">\r\n            {{ $t('grab.w2') }} <text>{{ $t('grab.w3') }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <view class=\"g-button\" @click=\"hideQrcode\">{{ $t('grab.b') }}</view>\r\n\r\n      <view class=\"bottom-logo\">\r\n        <image src=\"/static/images/login/bottom-logo.svg\" mode=\"\"></image>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 侧边栏 -->\r\n    <sidebar v-show=\"showSidebar\" :version=\"versionCode\" :status=\"showSidebar\" @close=\"closeSidebar\"></sidebar>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import sidebar from '@/components/sidebar/sidebar.vue'\r\n  import sunmiModal from '@/components/sunmiModal/sunmiModal.vue'\r\n  import api from '@/utils/api/index.js'\r\n  import {\r\n    refreshToken\r\n  } from '@/config/config.js'\r\n  import utils from '@/utils/util.js'\r\n  import print from '@/utils/mixins/print.js'\r\n  import music from '@/utils/music/music.js'\r\n\r\n  export default {\r\n    name: 'pay',\r\n    components: {\r\n      sidebar,\r\n      sunmiModal,\r\n    },\r\n    mixins: [print],\r\n    data() {\r\n      return {\r\n        bluetoothStatus: false,\r\n        payStatusTimer: null,\r\n        money: '0.00',\r\n        // payTypeHeight: 80,\r\n        keyHeight: 70,\r\n        inputMoney: [],\r\n        keyList: [1, 2, 3, 4, 5, 6, 7, 8, 9, 'C', 0, 'del'],\r\n        // 'GrabPay', 'AliPay+', 'wechat'\r\n        payTypeList: [],\r\n        showSidebar: false,\r\n\r\n        systemInfo: '',\r\n        showPaying: false,\r\n        payTimeout: false,\r\n        showErrorPay: false,\r\n        errorPayDesc: '',\r\n\r\n        iconRootPath: '/static/sj',\r\n        wgtConfig: {}, // 升级配置\r\n        locale: 'zh',\r\n        description: '',\r\n        isShowupgrade: false,\r\n        pushClientid: '',\r\n\r\n        versionCode: '100',\r\n        showGrabPay: false,\r\n        //二维码相关参数\r\n        modal_qr: false,\r\n        qr_url: '', // 要生成的二维码值\r\n\r\n        onlyContentId: '',\r\n\r\n        payMentType: '',\r\n\r\n        qrMb: 20,\r\n        grabMb: 0,\r\n        qrSize: 200,\r\n\r\n        transactionArr: [],\r\n        is_shangmi: 0,\r\n        is_lunxun: 0,\r\n      }\r\n    },\r\n    filters: {\r\n      convertNum(num) {\r\n        if (num == '0.00') {\r\n          return num\r\n        }\r\n        // 正则转换为千分位 1,234.56\r\n        let n = num.replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,')\r\n        return n\r\n      },\r\n    },\r\n    watch: {\r\n      showPaying(val) {\r\n\t\tconsole.log(val)\r\n\t\tthis.payTimeout = false\r\n\t\tif (val && this.acquirerType != 'DCS_CARD_NOW_PAY') {\r\n\t\t  setTimeout(() => {\r\n\t\t\tthis.payTimeout = true\r\n\t\t  }, 15000)\r\n\t\t}\r\n\t\tif (!val) {\r\n\t\t  this.is_lunxun = 0\r\n\t\t  this.payStatusTimer && clearInterval(this.payStatusTimer)\r\n\t\t  this.payStatusTimer = null\r\n\t\t}\r\n\t  },\r\n    },\r\n    onShow() {\r\n      // #ifdef APP-PLUS\r\n      let text = 'Update App'\r\n      this.locale = uni.getStorageSync('locale')\r\n      let pathImg = '/Group-3.png'\r\n      // if (this.locale == 'en') {\r\n      // \tpathImg = '/light-sj-en.png'\r\n      // }\r\n      this.topIconPath =\r\n        plus.io.convertLocalFileSystemURL(this.iconRootPath) + pathImg\r\n\r\n      this.wgtConfig = {\r\n        bgColor: '#ffffff',\r\n        btnBgColor: '#0559ff',\r\n        titleColor: '#161620',\r\n        conColor: '#161620', //可选,默认#666666内容颜色\r\n        updateBtnText: text,\r\n      }\r\n      this.onInstall()\r\n      // #endif\r\n\r\n      uni.getSystemInfo({\r\n        success: (res) => {\r\n          // let n = 19 + 62 + 63*3 + 44\r\n          let n = (res.windowHeight - res.safeArea.top - 615) / 5\r\n          if (res.windowHeight < 600) {\r\n            this.qrSize = 180\r\n          }\r\n          this.qrMb = n\r\n          this.grabMb = n\r\n\r\n          if (res.deviceBrand == 'sunmi') {\r\n            this.is_shangmi = 1\r\n          } else {\r\n            this.is_shangmi = 0\r\n          }\r\n        },\r\n      })\r\n    },\r\n    mounted() {\r\n      this.addSystemLog()\r\n      // this.remindOpenBluetooth()\r\n\r\n      let token = uni.getStorageSync('Authorization')\r\n      // uni.setStorageSync('terminalId', '1167417326191378432')\r\n      let terminalId = uni.getStorageSync('terminalId')\r\n      console.log(terminalId, 'terminalId')\r\n      console.log(token)\r\n      if (!token || !terminalId) {\r\n        uni.reLaunch({\r\n          url: '/pages/login/login',\r\n        })\r\n      } else {\r\n        this.getStoreName()\r\n        this.selectAcquirerStoreDtoWithAcquirer()\r\n        this.getUrl()\r\n        // #ifdef APP-PLUS\r\n        this.judgeBluetooth()\r\n        if (terminalId) {\r\n          this.connect()\r\n        }\r\n        // #endif\r\n      }\r\n    },\r\n    methods: {\r\n      // 判断是否开启蓝牙\r\n      judgeBluetooth() {\r\n        // 主机模式\r\n        return new Promise((resolve, reject) => {\r\n          // mode: 'central',\r\n          uni.openBluetoothAdapter({\r\n            success: (r) => {\r\n              console.log('蓝牙初始化成功')\r\n              // 获取蓝牙的匹配状态\r\n              uni.getBluetoothAdapterState({\r\n                success: function(row) {\r\n                  console.log('蓝牙状态：', row.available)\r\n                  if (row.available) {\r\n                    resolve()\r\n                  } else {\r\n                    // 请开启蓝牙\r\n                    this.remindOpenBluetooth()\r\n                    reject()\r\n                  }\r\n                },\r\n                fail: function(err) {\r\n                  // 请开启蓝牙\r\n                  this.remindOpenBluetooth()\r\n                  reject()\r\n                },\r\n              })\r\n            },\r\n            fail: (err) => {\r\n              // 请开启蓝牙\r\n              console.log('蓝牙初始化失败' + JSON.stringify(err))\r\n              this.remindOpenBluetooth()\r\n              reject()\r\n            },\r\n          })\r\n        })\r\n      },\r\n      // 提示用户需要开启蓝牙\r\n      remindOpenBluetooth() {\r\n        this.bluetoothStatus = true\r\n        uni.onBluetoothAdapterStateChange((blu) => {\r\n          if (blu.available) {\r\n            this.bluetoothStatus = false\r\n          }\r\n        })\r\n      },\r\n      addSystemLog() {\r\n        try {\r\n          let o = {\r\n            params: '1',\r\n            token: '2',\r\n            shebei: '3',\r\n            terminalId: uni.getStorageSync('terminalId'),\r\n            url: '4',\r\n            detail: JSON.stringify(uni.getSystemInfoSync('systemInfo')),\r\n          }\r\n          uni.request({\r\n            url: 'http://18.140.198.86/pos/log.php',\r\n            data: {\r\n              ...o,\r\n            },\r\n            header: {\r\n              // application/x-www-form-urlencoded\r\n              'Content-Type': 'application/x-www-form-urlencoded',\r\n            },\r\n            method: 'POST',\r\n            success: (res) => {\r\n              // console.log(123,res)\r\n            },\r\n            fail: (fail) => {\r\n              // console.log('日志接口fail:', fail)\r\n            },\r\n            complete: (com) => {\r\n              console.log('日志接口:', com)\r\n            },\r\n          })\r\n        } catch (e) {\r\n          //TODO handle the exception\r\n        }\r\n      },\r\n      async getStoreName() {\r\n        let res = await api.storeInfo({})\r\n        console.log(res, '-----')\r\n        let data = res.data\r\n        if (res.code == '000000') {\r\n          uni.setStorageSync('storeName', data.name)\r\n        }\r\n      },\r\n\r\n      hideQrcode() {\r\n        this.showGrabPay = false\r\n        clearInterval(this.payStatusTimer)\r\n        this.payStatusTimer = null\r\n        this.is_lunxun = 0\r\n        this.qr_url = ''\r\n      },\r\n      async getUrl() {\r\n        let res = await api.getWebsocketBackupUrl()\r\n        let data = res.data\r\n        if (res.code == '000000') {\r\n          console.log(data.websocketUrl, 'websocketUrl')\r\n          uni.setStorageSync('websocketUrl', data.websocketUrl)\r\n        }\r\n      },\r\n      onInstall() {\r\n        let _this = this\r\n\r\n        plus.runtime.setBadgeNumber(0)\r\n        plus.runtime.getProperty(plus.runtime.appid, function(widgetInfo) {\r\n          console.log(widgetInfo, '设备信息', _this.pushClientid)\r\n          uni.setStorageSync('version', widgetInfo.version)\r\n          let versionCode = widgetInfo.versionCode\r\n          _this.versionCode = versionCode\r\n          let o = {\r\n            version: versionCode,\r\n            un_id: uni.getStorageSync('MOT-SUNMISN') || '',\r\n          }\r\n          console.log(o, '入参')\r\n          // 版本更新提示\r\n          api\r\n            .get_upgrade(o)\r\n            .then((res) => {\r\n              console.log(res, '我是升级')\r\n              uni.hideLoading()\r\n              if (res.code == 0) {\r\n                let r = res.data.upgrade || ''\r\n                if (r) {\r\n                  _this.description =\r\n                    _this.locale == 'zh' ? r.description : r.description_en\r\n                  if (r.version_code > versionCode) {\r\n                    if (r.is_big == 1) {\r\n                      _this.startUpDate(r)\r\n                    } else {\r\n                      _this.startWgt(r)\r\n                    }\r\n                  } else {\r\n                    // _this.$util.showText('已是最新版本！')\r\n                  }\r\n                  _this.isCheckVersion = true\r\n                }\r\n              }\r\n              console.log(res)\r\n            })\r\n            .catch((err) => {\r\n              console.log(err)\r\n            })\r\n        })\r\n      },\r\n      //开始app整包升级\r\n      startUpDate: function(data) {\r\n        console.log(data, '整包')\r\n        // platform = uni.getSystemInfoSync().platform\r\n        let url = data.down_url\r\n        // if (platform == 'ios') {\r\n        //   url = data.down_url_ios\r\n        // } else {\r\n        //   this.isShowupgrade = true\r\n        //   return\r\n        // }\r\n\r\n        console.log(upDater, 'upDater')\r\n        //app版本号获取方式\r\n        //plus.runtime.version; 与服务器的版本进行比较;\r\n        const upDater = uni.requireNativePlugin('CL-UpDater')\r\n        console.log(upDater, 'upDater')\r\n        let options = {\r\n          title: '',\r\n          ...this.wgtConfig,\r\n          con: this.locale == 'zh' ? data.description : data.description_en,\r\n          downUrl: url, //提示android端需设置apk下载地址,ios只需设置苹果商店app地址;\r\n          hidCancelbtn: data.is_force == 1 ? true : false,\r\n          topImgBg: this.topIconPath, //除非需要自定义头部logo，否则不需要传;\r\n        }\r\n        //必需提供下载地址;\r\n        upDater.startUpdate(options)\r\n      },\r\n\r\n      //这个wgt强制升级，有提示框;\r\n      //wgt升级方式;\r\n      startWgt: function(data) {\r\n        console.log(data, '热更新')\r\n        //注意：服务器的热更新版本号必需大于本地wgt版本号\r\n        //http://192.168.50.201/update.wgt,\r\n        // let topIconPath = this.iconRootPath;\r\n        let con = this.locale == 'zh' ? data.description : data.description_en\r\n        console.log(this.topIconPath, '-----', this.locale, this.wgtConfig)\r\n        let that = this\r\n        //第一步要获取本地的wgt版本号；\r\n        const upDater = uni.requireNativePlugin('CL-UpDater')\r\n        let options = {\r\n          title: '',\r\n          con: con,\r\n          ...this.wgtConfig,\r\n          downUrl: data.down_url, //提示android端需设置apk下载地址,ios只需设置苹果商店app地址;\r\n          hidCancelbtn: data.is_force == 1 ? true : false,\r\n          topImgBg: this.topIconPath || '', //除非需要自定义头部logo，否则不需要传;\r\n        }\r\n        //第一步创建文件下载路径，并创建文件;\r\n        plus.io.requestFileSystem(plus.io.PUBLIC_DOWNLOADS, function(fobject) {\r\n          //设置文件下载根路径;\r\n          let rootPath = fobject.root.fullPath\r\n          upDater.wgtUpdate(options, rootPath, (result) => {\r\n            if (result) {\r\n              var pathNew = plus.io.convertAbsoluteFileSystem(result)\r\n              console.log(pathNew)\r\n              plus.runtime.install(\r\n                pathNew, {\r\n                  force: false,\r\n                },\r\n                function() {\r\n                  //进行重新启动;\r\n                  plus.runtime.restart()\r\n                },\r\n                (e) => {\r\n                  console.log(JSON.stringify(e))\r\n                  uni.showToast({\r\n                    title: '安装升级包失败' + JSON.stringify(e),\r\n                    icon: 'none',\r\n                  })\r\n                }\r\n              )\r\n            }\r\n          })\r\n        })\r\n      },\r\n      /**\r\n       * 创建连接\r\n       */\r\n      connect() {\r\n        let _this = this\r\n        var wv = plus.webview.create('/hybrid/html/websocket.html', '1', {\r\n          zindex: 0,\r\n          width: '0px',\r\n          height: '0px',\r\n        })\r\n        var currentWebview = this.$scope.$getAppWebview()\r\n        currentWebview.append(wv)\r\n        //重点: 监听子页面uni.postMessage返回的值\r\n        plus.globalEvent.addEventListener('plusMessage', function(msg) {\r\n          console.log(msg.data.args.data, '页面')\r\n          if (msg.data.args.data && msg.data.args.data.name == 'postMessage') {\r\n            _this.showPaying = false\r\n            let arg = msg.data.args.data.arg.second.content\r\n            let JsonBigstring = require('json-bigint')({\r\n              storeAsString: true,\r\n            })\r\n            let resData = JsonBigstring.parse(arg)\r\n            _this.addSocketLog(arg)\r\n            let content = JsonBigstring.parse(resData.content)\r\n            // _this.msg = JSON.stringify(msg.data.args.data.arg);\r\n            // console.log(arg,'arg')\r\n            console.log(\r\n              resData.content,\r\n              'resData',\r\n              JsonBigstring.parse(resData.content)\r\n            )\r\n            // 如果acquirerType包含WECHAT 则停止socket 支付宝国内和国外\r\n            /*\r\n          if (\r\n            [\r\n              'WECHAT',\r\n              'ALI_MERCHANT_SCAN_USER_QR_PAY',\r\n              'DBS_PAY_NOW_MERCHANT_PRESENTED_QR_PAY',\r\n              'GRAB_PAY',\r\n\t\t\t  'GRAB_PAY_LATER'\r\n            ].includes(content.acquirerType)\r\n          ) {\r\n            console.log('WECHAT 我是微信支付')\r\n            return\r\n          }\r\n\t\t  */\r\n            if (content.acquirerType.indexOf('WECHAT') >= 0 ||\r\n              content.acquirerType.indexOf('ALI_') >= 0 ||\r\n              content.acquirerType.indexOf('DBS_PAY') >= 0 ||\r\n              content.acquirerType.indexOf('GRAB_') >= 0) {\r\n              console.log('WECHAT 我是微信支付')\r\n              return\r\n\r\n            }\r\n\r\n            if (content.id && content.id != _this.onlyContentId) {\r\n              _this.onlyContentId = content.id\r\n              let type = content.paymentStatus == 'success' ? 1 : 2\r\n              let money = Number(content.amount) / 100\r\n              let arr = _this.transactionArr\r\n              if (\r\n                content.paymentStatus == 'success' &&\r\n                !arr.includes(content.id + '')\r\n              ) {\r\n                let o = {\r\n                  params: 'params',\r\n                  token: uni.getStorageSync('Authorization') || '1',\r\n                  shebei: uni.getStorageSync('MOT-SUNMISN') || '2',\r\n                  terminalId: uni.getStorageSync('terminalId') || '3',\r\n                  url: 'Socket/dayin/before',\r\n                  detail: JSON.stringify(content),\r\n                }\r\n                console.log(o, '我是打印日志参数')\r\n                _this.addLog(o)\r\n\r\n                uni.getSystemInfo({\r\n                  success: (res) => {\r\n                    if (res.deviceBrand == 'sunmi') {\r\n                      _this.printSunmi(content, 2)\r\n                    } else {\r\n                      _this.printTextSocket(content, 2)\r\n                    }\r\n\r\n                    uni.navigateTo({\r\n                      url: '/pages/status/status?type=' +\r\n                        type +\r\n                        '&num=' +\r\n                        money +\r\n                        '&id=' +\r\n                        content.id,\r\n                    })\r\n                    _this.showGrabPay = false\r\n                    _this.money = '0.00'\r\n                    _this.inputMoney = []\r\n                  },\r\n                })\r\n              }\r\n            }\r\n\r\n            // console.log(\r\n            //   resData,'子页面返回的数据为:' + JSON.stringify(msg.data.args.data.arg)\r\n            // )\r\n          }\r\n        })\r\n      },\r\n      addLog(o) {\r\n        try {\r\n          // console.log('日志接口入参:', o)\r\n          uni.request({\r\n            url: 'http://18.140.198.86/pos/log.php',\r\n            data: {\r\n              ...o,\r\n            },\r\n            header: {\r\n              // application/x-www-form-urlencoded\r\n              'Content-Type': 'application/x-www-form-urlencoded',\r\n            },\r\n            method: 'POST',\r\n            success: (res) => {\r\n              console.log(123, res)\r\n            },\r\n            fail: (fail) => {\r\n              console.log('日志接口fail:', fail)\r\n            },\r\n            complete: (com) => {\r\n              console.log('日志接口:', com)\r\n            },\r\n          })\r\n        } catch (e) {\r\n          //TODO handle the exception\r\n          console.log('打印日志是吧', e)\r\n        }\r\n      },\r\n\r\n      // 添加socket日志\r\n      addSocketLog(arg) {\r\n        try {\r\n          let o = {\r\n            detail: arg,\r\n          }\r\n          uni.request({\r\n            url: 'http://18.140.198.86/pos/addsocket.php',\r\n            data: {\r\n              ...o,\r\n            },\r\n            header: {\r\n              // application/x-www-form-urlencoded\r\n              'Content-Type': 'application/x-www-form-urlencoded',\r\n            },\r\n            method: 'POST',\r\n            success: (res) => {\r\n              // console.log(123,res)\r\n            },\r\n          })\r\n        } catch (e) {\r\n          //TODO handle the exception\r\n        }\r\n      },\r\n      async selectAcquirerStoreDtoWithAcquirer() {\r\n        let res = await api.selectAcquirerStoreDtoWithAcquirer()\r\n        console.log(res)\r\n        if (res.code == '000000') {\r\n          // GRAB_MERCHANT_PRESENTED_QR_GRAB_PAY GRAB_MERCHANT_PRESENTED_QR_PAY_LATER\r\n          // 进行数据处理；如果 acquirerType == GRAB_MERCHANT_PRESENTED_QR_PAY_LATER 或者 acquirerType == GRAB_MERCHANT_PRESENTED_QR_GRAB_PAY 只显示 GrabPay\r\n          // 1、重新赋值acquirerType\r\n          let list = res.data.map((r) => {\r\n            if (\r\n              r.acquirerType == 'GRAB_MERCHANT_PRESENTED_QR_PAY_LATER' ||\r\n              r.acquirerType == 'GRAB_MERCHANT_PRESENTED_QR_GRAB_PAY'\r\n            ) {\r\n              r.acquirerType = 'GRAB_MERCHANT_PRESENTED_QR_PAY_LATER'\r\n            }\r\n            return r\r\n          })\r\n          // 2、根据acquirerType进行去重\r\n          list = utils.uniqueArray(list, 'acquirerType')\r\n          // 3、过滤掉 WECHAT_NATIVE_MERCHANT_PAY ALI_STATIC_QR_CODE\r\n          list = list.filter((r) => {\r\n            return (\r\n              r.acquirerType != 'WECHAT_NATIVE_MERCHANT_PAY' &&\r\n              r.acquirerType != 'ALI_STATIC_QR_CODE' &&\r\n              r.acquirerType != 'WECHAT_H5_MERCHANT_PAY'\r\n            )\r\n          })\r\n          this.payTypeList = list\r\n          this.handleStyle(this.payTypeList.length)\r\n        }\r\n      },\r\n      // 处理样式\r\n      handleStyle(len) {\r\n        uni.getSystemInfo({\r\n          success: (res) => {\r\n            let _h = 228\r\n            let winH = res.screenHeight\r\n            if (res.model == 'M2' || winH == '672') {\r\n              // winH = winH - 48\r\n            }\r\n            console.log(winH, 'winH')\r\n            if (len <= 3) {\r\n              // this.payTypeHeight = winH - 524\r\n              this.keyHeight = (winH - _h - 60) / 4\r\n            } else if (len > 3 && len <= 6) {\r\n              // this.payTypeHeight = winH - 484\r\n              this.keyHeight = (winH - _h - 60 * 2) / 4\r\n            } else {\r\n              // this.payTypeHeight = winH - 424\r\n              this.keyHeight = (winH - _h - 60 * 3) / 4\r\n            }\r\n            console.log(this.keyHeight, 'keyHeight')\r\n          },\r\n        })\r\n      },\r\n      updateMoney(item) {\r\n        // console.log(this.replayAcquireType('DBS_PAY_NOW_MERCHANT_PRESENTED_QR_PAY'),'123')\r\n        // 例如依次输入123：输入1 == 0.01，继续输入2 == 0.12 ，随后输入3应该进位变为 3 == 1.23 。\r\n        // console.log(this.inputMoney)\r\n        if (item == 'del') {\r\n          music.click()\r\n          // 删除的时候，逆向删除\r\n          this.inputMoney.pop()\r\n          this.money = this.inputMoney.join('')\r\n          if (this.money.length == 0) {\r\n            this.money = '0.00'\r\n          } else if (this.money.length == 1) {\r\n            this.money = '0.0' + this.money\r\n          } else if (this.money.length == 2) {\r\n            this.money = '0.' + this.money\r\n          } else {\r\n            this.money = this.money.slice(0, -2) + '.' + this.money.slice(-2)\r\n          }\r\n        } else if (item == 'C') {\r\n          music.click()\r\n          this.money = '0.00'\r\n          this.inputMoney = []\r\n        } else {\r\n          console.log(this.inputMoney.length, 'inputMoney')\r\n          if (item == '0' && this.inputMoney.length == 0) {\r\n            return\r\n          }\r\n          if (this.inputMoney.length > 7) {\r\n            return\r\n          }\r\n          music.click()\r\n          this.inputMoney.push(item)\r\n          this.money = this.inputMoney.join('')\r\n          if (this.money.length == 1) {\r\n            this.money = '0.0' + this.money\r\n          } else if (this.money.length == 2) {\r\n            this.money = '0.' + this.money\r\n          } else {\r\n            this.money = this.money.slice(0, -2) + '.' + this.money.slice(-2)\r\n          }\r\n        }\r\n      },\r\n\r\n      async openScan(item) {\r\n        if (\r\n          item.acquirerType == 'RED_DOT_PAY'\r\n          // item.acquirerType == 'DBS_PAY_NOW_MERCHANT_PRESENTED_QR_PAY'\r\n        ) {\r\n          return\r\n        }\r\n\r\n        this.locale = uni.getStorageSync('locale')\r\n        if (this.money != '0.00') {\r\n          let arr = [\r\n            'GRAB_MERCHANT_PRESENTED_QR_GRAB_PAY',\r\n            'GRAB_MERCHANT_PRESENTED_QR_PAY_LATER',\r\n            'DBS_PAY_NOW_MERCHANT_PRESENTED_QR_PAY',\r\n          ]\r\n          if (arr.includes(item.acquirerType)) {\r\n            this.sendPayment('', item)\r\n            return\r\n          }\r\n          if (this.is_shangmi == 1) {\r\n            // 只允许通过相机扫码\r\n            uni.scanCode({\r\n              onlyFromCamera: true,\r\n              autoZoom: false,\r\n              scanType: ['barCode', 'qrCode'],\r\n              success: (res) => {\r\n                console.log(res, '-----')\r\n                console.log('条码类型：' + res.scanType)\r\n                console.log('条码内容：' + res.result)\r\n                this.sendPayment(res.result, item)\r\n              },\r\n              complete: () => {\r\n                uni.hideLoading()\r\n              },\r\n            })\r\n          } else {\r\n            // 不是商米，则需要进行蓝牙判断\r\n            this.judgeBluetooth().then((res) => {\r\n              // 只允许通过相机扫码\r\n              uni.scanCode({\r\n                onlyFromCamera: true,\r\n                autoZoom: false,\r\n                scanType: ['barCode', 'qrCode'],\r\n                success: (res) => {\r\n                  console.log(res, '-----')\r\n                  console.log('条码类型：' + res.scanType)\r\n                  console.log('条码内容：' + res.result)\r\n                  this.sendPayment(res.result, item)\r\n                },\r\n                complete: () => {\r\n                  uni.hideLoading()\r\n                },\r\n              })\r\n            })\r\n          }\r\n        } else {\r\n          utils.showText('金额不能为零')\r\n        }\r\n      },\r\n      // 发起支付\r\n      async sendPayment(code, item) {\r\n        utils.showLoading()\r\n        if (code) {\r\n          this.showPaying = true\r\n        }\r\n        let acquirerType = item.acquirerType\r\n        let arr = [\r\n          'GRAB_MERCHANT_PRESENTED_QR_GRAB_PAY',\r\n          'GRAB_MERCHANT_PRESENTED_QR_PAY_LATER',\r\n        ]\r\n        if (arr.includes(acquirerType)) {\r\n          acquirerType = 'GRAB_MERCHANT_PRESENTED_QR_PAY_LATER'\r\n        }\r\n        console.log(acquirerType, '支付方式')\r\n        let o = {\r\n          acquirerType: acquirerType,\r\n          paymentTerminalRequestVo: {\r\n            amount: (this.money * 100).toFixed(0),\r\n            currency: item.storeCurrency,\r\n            actionType: 'PAY',\r\n            qrCodeNumber: code,\r\n          },\r\n        }\r\n        console.log(o, '支付参数')\r\n        let res = await api.paymentPay(o)\r\n        console.log(res, 'sss')\r\n        if (res.code == '000000') {\r\n          let data = res.data\r\n          // if (acquirerType == 'ALI_MERCHANT_SCAN_USER_QR_PAY') {\r\n          //   this.getPayStatusByWx(data.transactionId)\r\n          //   return\r\n          // }\r\n          // if (acquirerType == 'WECHAT_MERCHANT_SCAN_USER_QR_PAY') {\r\n          //   this.getPayStatusByWx(data.transactionId)\r\n          //   return\r\n          // }\r\n          if (acquirerType == 'GRAB_MERCHANT_PRESENTED_QR_PAY_LATER') {\r\n            this.qr_url = data.grabPayLaterPaymentDto.qrcode\r\n            this.payMentType = 'GrabPay'\r\n            this.showGrabPay = true\r\n            this.getPayStatusByWx(data.transactionId)\r\n            return\r\n          } else if (acquirerType == 'DBS_PAY_NOW_MERCHANT_PRESENTED_QR_PAY') {\r\n            this.qr_url = data.dbsPayNowPaymentDto.base64Image\r\n            this.payMentType = 'PayNow'\r\n            this.showGrabPay = true\r\n            this.getPayStatusByWx(data.transactionId)\r\n            return\r\n          }\r\n          this.getPayStatusByWx(data.transactionId)\r\n          // console.log(88888888888888)\r\n\r\n          // let type = this.getArrFromObj(res.data)\r\n          // console.log(type, '-', this.money, '-', res.data.transactionId)\r\n          // if (type == 1) {\r\n          //   this.showPaying = false\r\n          //   this.printCurrent(res.data)\r\n          //   this.transactionArr.push(res.data.transactionId + '')\r\n          //   console.log(this.transactionArr, 'this.transactionArr')\r\n          //   uni.navigateTo({\r\n          //     url:\r\n          //       '/pages/status/status?type=' +\r\n          //       type +\r\n          //       '&num=' +\r\n          //       this.money +\r\n          //       '&id=' +\r\n          //       res.data.transactionId,\r\n          //   })\r\n          //   this.money = '0.00'\r\n          //   this.inputMoney = []\r\n          // } else {\r\n          //   // 等待socket\r\n          // }\r\n        } else if (res.code == 'PAYMENT_IN_PROCESS') {\r\n          // 等待socket\r\n        } else {\r\n          this.showPaying = false\r\n          this.errorPayDesc = res.message\r\n          this.showErrorPay = true\r\n        }\r\n        uni.hideLoading()\r\n      },\r\n\r\n      // 每隔n秒请求一次接口api.selectTransactionById\r\n      getPayStatusByWx(id) {\r\n        let o = {\r\n          id: id,\r\n        }\r\n        clearInterval(this.payStatusTimer)\r\n        this.payStatusTimer = null\r\n        this.payStatusTimer = setInterval(() => {\r\n\t\t\t\r\n          if (this.is_lunxun == 1) {\r\n            console.log('等待接口返回！！！')\r\n            return;\r\n          }\r\n          this.is_lunxun = 1;\r\n\t\t  \r\n          api.selectTransactionById(o).then((res) => {\r\n            console.log(res, 'getPayStatusByWx')\r\n            if (res.code == '000000') {\r\n              let data = res.data;\r\n\t\t\t  /*\r\n\t\t\t  let o = {\r\n\t\t\t    detail: JSON.stringify(data),\r\n\t\t\t  }\r\n\t\t\t  uni.request({\r\n\t\t\t    url: 'http://18.140.198.86/pos/addtransaction.php',\r\n\t\t\t    data: {\r\n\t\t\t      ...o,\r\n\t\t\t    },\r\n\t\t\t    header: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n\t\t\t    method: 'POST',\r\n\t\t\t    success: (res) => {},\r\n\t\t\t  })\r\n\t\t\t  */\r\n              let type = this.getArrFromObj(data)\r\n              if (type == 1) {\r\n                clearInterval(this.payStatusTimer)\r\n                this.payStatusTimer = null\r\n                this.showPaying = false\r\n                this.showGrabPay = false\r\n                this.startPrint(data)\r\n                uni.navigateTo({\r\n                  url: '/pages/status/status?type=' +\r\n                    type +\r\n                    '&num=' +\r\n                    data.amount / 100 +\r\n                    '&id=' +\r\n                    data.id,\r\n                })\r\n                this.money = '0.00'\r\n                this.inputMoney = []\r\n              }\r\n            }\r\n            this.is_lunxun = 0;\r\n            console.log('接口返回成功！！！')\r\n          }).catch(() => {\r\n            console.log('接口异常重置成功！！！')\r\n            this.is_lunxun = 0;\r\n          })\r\n        }, 2000)\r\n      },\r\n\r\n      printCurrent(data) {\r\n        let item = {}\r\n        if (data.alipayPaymentDto) {\r\n          item = data.alipayPaymentDto.transactionAndTransactionMetadataComboDto\r\n        } else if (data.wechatPaymentDto) {\r\n          item = data.wechatPaymentDto.transactionAndTransactionMetadataComboDto\r\n        }\r\n        if (item) {\r\n          this.startPrint(item)\r\n        }\r\n      },\r\n      // 开始打印\r\n      startPrint(item) {\r\n        // item\r\n        uni.getSystemInfo({\r\n          success: (res) => {\r\n            if (res.deviceBrand == 'sunmi') {\r\n              this.printSunmi(item, 2)\r\n            } else {\r\n              this.printText(item, 2)\r\n            }\r\n          },\r\n        })\r\n      },\r\n      getArrFromObj(obj) {\r\n        let str = JSON.stringify(obj)\r\n        let flag = str.indexOf('success') != -1 ? 1 : 2\r\n        return flag\r\n      },\r\n\r\n      // 打开侧边个人中心\r\n      openSidebar() {\r\n        this.showSidebar = true\r\n      },\r\n      closeSidebar() {\r\n        this.showSidebar = false\r\n      },\r\n    },\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  @import 'pay.scss';\r\n</style>","import mod from \"-!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay.vue?vue&type=style&index=0&id=c10d0c50&lang=scss&scoped=true&\"; export default mod; export * from \"-!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\kisszxc29\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay.vue?vue&type=style&index=0&id=c10d0c50&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1726451168878\n      var cssReload = require(\"C:/Users/kisszxc29/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}